<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tomato's Christmas Gift ğŸ„</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Intro Screen -->
    <div id="intro-screen">
        <div id="intro-text"></div>
        <div id="intro-hint">Make an OK gesture ğŸ‘Œ to continue...</div>
    </div>

    <!-- Main Stage: 3D Scene -->
    <div id="scene-container">
        <canvas id="three-canvas"></canvas>
    </div>

    <!-- Finale Prompt -->
    <div id="finale-prompt" class="hidden">
        Press the final gesture to unlock the final gift
    </div>

    <!-- Instruction Modal -->
    <div id="instruction-modal" class="hidden">
        <div class="instruction-content">
            <div id="instruction-text"></div>
        </div>
    </div>

    <!-- Status UI (Hidden) -->
    <div id="ui-layer" style="display: none;">
        <div class="game-info">
            <div class="collected-count">0/6 Collected</div>
            <div class="hint">Make hand gestures to find letters!</div>
            <div id="hold-feedback" class="hold-feedback" style="display: none;"></div>
        </div>
    </div>

    <!-- Camera PIP (Bottom Right) -->
    <div id="camera-pip">
        <video id="webcam" autoplay playsinline></video>
        <canvas id="output_canvas"></canvas>
    </div>

    <!-- Modal Popup -->
    <div id="modal" class="modal hidden">
        <div class="modal-content">
            <h2 id="modal-title">You found a letter!</h2>
            <p id="modal-text">Content placeholder</p>
            <button id="modal-close">Continue (Space)</button>
        </div>
    </div>

    <!-- Finale Container -->
    <div id="finale-container" class="hidden">
        <h1>ğŸ„ I LOVE U ğŸ„</h1>
        <div id="photo-grid"></div>
        <p class="finale-message">Merry Christmas! â¤ï¸</p>
    </div>

    <!-- Gesture HUD: Collection Bar (six plain dots) -->
    <div id="gesture-hud" aria-hidden="false">
        <div class="hud-item" data-letter="I"><div class="hud-circle"></div></div>
        <div class="hud-item" data-letter="L"><div class="hud-circle"></div></div>
        <div class="hud-item" data-letter="O"><div class="hud-circle"></div></div>
        <div class="hud-item" data-letter="V"><div class="hud-circle"></div></div>
        <div class="hud-item" data-letter="E"><div class="hud-circle"></div></div>
        <div class="hud-item" data-letter="U"><div class="hud-circle"></div></div>
    </div>

    <!-- Photo Animation Modal (hidden) -->
    <div id="photo-animation-modal" class="hidden" role="dialog" aria-modal="true">
        <div class="photo-animation-content">
            <img id="photo-animation-img" src="" alt="Animation frame">
            <div id="photo-animation-caption" class="photo-caption"> </div>
        </div>
    </div>

    <!-- Voice Surprise Modal -->
    <div id="voice-modal" class="hidden" role="dialog" aria-modal="true">
        <div class="voice-modal-content">
            <button id="voice-play-btn" class="voice-play" aria-label="Play voice message"></button>
            <div id="voice-caption" class="photo-caption"></div>
        </div>
    </div>

    <!-- Runaway Button Surprise Modal -->
    <div id="runaway-modal" class="hidden" role="dialog" aria-modal="true">
        <div class="runaway-content">
            <h2 id="runaway-question">è°æ˜¯shabiï¼Ÿ</h2>
            <div id="runaway-area" class="runaway-area">
                <div class="runaway-buttons" id="runaway-buttons">
                    <button id="run-btn-a" class="run-btn">æˆ‘</button>
                    <button id="run-btn-b" class="run-btn">ä½ </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Angel Surprise Modal -->
    <div id="angel-modal" class="hidden" role="dialog" aria-modal="true">
        <div class="angel-overlay">
            <div class="angel-content">
                <img id="angel-img" src="" alt="Angel" />
                <div id="angel-caption" class="photo-caption"></div>
            </div>
        </div>
    </div>

    <!-- Letter Surprise Modal (Surprise 5: My Sincere Words) -->
    <div id="letter-modal" class="hidden" role="dialog" aria-modal="true">
        <div class="letter-overlay">
            <div class="letter-content">
                <div id="letter-text" class="letter-text" tabindex="0"></div>
                <div class="letter-hint">Click the text to finish typing. Press Space to close.</div>
            </div>
        </div>
    </div>

    <!-- Final photo is shown on the separate merry_christmas.html page -->

    <script type="module" src="main.js"></script>
</body>
</html>
